
<div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading" (click)="toggleCollapse()">
            <span class="panel-title">{{startDate == undefined ? 'Time Segment' : startDate}}</span>
            <fa name="times" (click)="onDelete()" class="link pull-right"></fa>
            <fa [name]="isExpanded == true ? 'chevron-up' : 'chevron-down'" (click)="toggleCollapse()" class="link pull-right chevron"></fa>
        </div>
        <div [class.collapse]="!isExpanded" class="panel-collapse">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="">Starting Time</label>
                                    <div class='input-group date inputText' id='startDate'>
                                        <dp-date-picker 
                                            [config]="datePickerConfig"
                                            [(ngModel)]="startDate" 
                                            mode="daytime" 
                                            [theme]="'dp-material dp-main'"></dp-date-picker>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6" *ngIf="selectedInputMethod == 'table'">
                                <div class="form-group">
                                    <label for="">End Time</label>
                                    <div class='input-group date inputText' id='endDate'>
                                        <dp-date-picker 
                                            [config]="datePickerConfig"
                                            [(ngModel)]="endDate" 
                                            mode="daytime" 
                                            [theme]="'dp-material dp-main'"></dp-date-picker>
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <div class="form-group">
                            <label for="">Comment</label>
                            <textarea name="" [(ngModel)]="comment" id="comment" class="form-control"></textarea>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div *ngIf="variableType != 'breakdown'">
                            <div class="form-group">
                                <label for="">Input Method</label>
                                <select id="input-method" [(ngModel)]="selectedInputMethod" class="form-control">
                                    <option value="constant">Constant</option>
                                    <option value="expression">Expression</option>
                                    <option value="table">Input Table</option>
                                    <option value="breakdown">Breakdown</option>
                                    <option value="discrete">Discrete Random</option>
                                </select>
                            </div>
                    
                            <variable-constant 
                                [time-segment]="timeSegment"
                                *ngIf="selectedInputMethod == 'constant'" 
                                [branch-id]="branchId"></variable-constant>

                            <variable-expression
                                *ngIf="selectedInputMethod == 'expression'" 
                                [branch-id]="branchId"></variable-expression>                                        

                            <variable-table 
                                *ngIf="selectedInputMethod == 'table'" 
                                [branch-id]="branchId" 
                                [variable-type]="variableType" 
                                [start-time]="startDate"
                                [end-time]="endDate"
                                [time-segment]="timeSegment" ></variable-table>

                            <variable-breakdown 
                                *ngIf="selectedInputMethod == 'breakdown'" 
                                [branch-id]="branchId" 
                                [sub-variable-list]="subVariableList"></variable-breakdown>

                            <variable-discrete-random 
                                *ngIf="selectedInputMethod == 'discrete'" 
                                [branch-id]="branchId"></variable-discrete-random>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
